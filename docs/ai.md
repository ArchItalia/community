<html>

<head>
<script defer data-domain="deepai.org" src="https://plausible.io/js/script.js"></script>
</head>

<body>
       


  
    <div align="center" data-freestar-ad="__336x280 __970x250" id="deepai.org_billboard_ATF">
      <script data-cfasync="false" type="text/javascript">
        freestar.config.enabled_slots.push({ placementName: "deepai.org_billboard_ATF", slotId: "deepai.org_billboard_ATF" });
      </script>
      
    </div>
    


<button id="chatSessionEditing" type="button" onclick="showChatHistoryEditing()"></button>
<div class="chatbox-wrapper" id="chatboxWrapperId_0" onkeypress="textAreaKeyPressHandler(event)">


<textarea class="chatbox" rows="10" cols="50"></textarea>
<center> 
<div id="progressContainer">
  <div id="progressBar"> </div>
</div>

</div>
<div id="copypopup"> <br></div>
<div id="summarypopup"> <br></div>



<div class="response-length-options">
<button id="chatSubmitButton" type="button" onclick="chatSubmit()"></button>
<button id="chatStopButton" type="button" onclick="chatStop()"></button>
<div id="genius" ></div>
</div>


<div id="history-editing">
<button id="chatSessionDeleteButton" type="button" onclick="deleteChatHistoryEntry()">Cancella Chat</button>
</div>




        <dialog id="signup-modal">
            <div class="modal-body">
                <p class="title"></p>
<!--                <p class="subtitle"></p>-->
                <form style="text-align:center">
                    <span style="display:none" id="moreSignupOptions">

                      <input id="user-email" type="email" placeholder="email *">
                      <input id="user-password" type="password" placeholder="password *">
                      <input id="confirm-user-password" type="password" placeholder="confirm password *">
                      <button class="button" onclick="signup(event)">Sign up</button>
                      <div class="other-options-signup-row">
                        <div class="other-options-signup-line"></div>
                        <div class="other-options-signup" style="display:inline-block;"> <small>OR</small> </div>
                        <div class="other-options-signup-line"></div>
                      </div>
<!--                      <button class="button social-auth"><img src="/static/images/twitter-icon.png"><span class="middle"></span></button>-->
                      <button class="button social-auth" ><img src="/static/images/github-icon.png"><span class="middle"></span></button>
                      <button class="button social-auth" ><img src="/static/images/linkedin-icon.png"><span class="middle"></span></button>
                    </span>
                    <button class="button social-auth"><span class="middle"></span></button>

                    <p id="user-email-error" class="hide"></p>
                    <p id="user-password-error" class="hide"></p>

                    <button class="button more-options" onclick="document.getElementById('moreSignupOptions').style.display='inline'; this.remove(); return false"></button>


       
                </form>
            </div>
            <button id="close" class="close" type="button">&times;</button>
        </dialog>
        <dialog id="login-modal">
            <div class="modal-body">
                <p class="title"></p>
                <p class="subtitle"></p>
                <form style="text-align:center">
                    <span style="display:none" id="moreLoginOptions">
                      <input id="login-user-email"type="email" placeholder="email">
                      <p id="login-user-email-error" class="hide"></p>
                      <input id="login-user-password" type="password" placeholder="password">
                      <p id="login-user-password-error" class="hide"></p>
                      <button class="button" onclick="login(event)">Login</button>
                      <p class="subtitle">Forgot password? <a href="javascript:void();" style="color: #3a90e0; text-decoration: underline;" onclick="resetPassword(event)">Click here</a></p>
<!--                      <button class="button social-auth" onclick="social_login(event, 'twitter')"><img src="/static/images/twitter-icon.png"><span class="middle">Login with Twitter</span></button>-->
                      <button class="button social-auth" onclick="social_login(event, 'github')"><img src="/static/images/github-icon.png"><span class="middle">Login with GitHub</span></button>
                      <button class="button social-auth" onclick="social_login(event, 'linkedin')"><img src="/static/images/linkedin-icon.png"><span class="middle">Login with LinkedIn</span></button>
                    </span>
                    <button class="button social-auth" onclick="social_login(event, 'google')"><img src="/static/images/google-icon.png"><span class="middle">Login with Google</span></button>
                    <button class="button more-options" onclick="document.getElementById('moreLoginOptions').style.display='inline'; this.remove(); return false"></button>


                    <p class="subtitle">Don't have an account? <a href="javascript:void();" style="color: #c764ec; text-decoration: underline;" onclick="loginSwitchToSignup(event)"> Signup here</a></p>
                </form>
            </div>
            <button id="close-login" class="close" type="button">&times;</button>
        </dialog>
        <dialog id="subscription-modal">
            <div class="modal-body subscription-modal-body">
                <div id="subscription-pro-id" class="subscription-pro">
                    <div class="title-image-pro">
                        <p class="title">Become a DeepAI <small>PRO</small></p>
                        <img class="logo-imagepro" src="/static/images/prologo.jpg" />
                    </div>
                    <div class="modal-row">
                        <div class="sub-title">$4.99/mo</div>
                    </div>
                    <div class="modal-row">
                        <img class="check-imagepro" src="/static/images/greencheck.jpg" />
                        <div class="sub-info">500 AI generator calls per month + $5 per 500 more (includes images)</div>
                    </div>
                    <div class="modal-row">
                        <img class="check-imagepro" src="/static/images/greencheck.jpg" />
                        <div class="sub-info">1750 AI Chat messages per month + $5 per 1750 more</div>
                    </div>
                    <div class="modal-row">
                        <img class="check-imagepro" src="/static/images/greencheck.jpg" />
                        <div class="sub-info">60 Genius Mode messages per month + $5 per 60 more</div>
                    </div>
                    <div class="modal-row">
                        <img class="check-imagepro" src="/static/images/greencheck.jpg" />
                        <div class="sub-info">Private image generation</div>
                    </div>
                    <div class="modal-row">
                        <img class="check-imagepro" src="/static/images/greencheck.jpg" />
                        <div class="sub-info">Complete styles library</div>
                    </div>
                    <div class="modal-row">
                        <img class="check-imagepro" src="/static/images/greencheck.jpg" />
                        <div class="sub-info">API access</div>
                    </div>
                    <div class="modal-row">
                        <img class="check-imagepro" src="/static/images/greencheck.jpg" />
                        <div class="sub-info">Ad-free experience</div>
                    </div>
                    <div class="modal-row">
                        <div class="sub-info purple">*</div>
                        <div class="sub-info smaller">This is a recurring payment that will happen monthly</div>
                    </div>
                    <div class="modal-row">
                        <div class="sub-info purple">*</div>
                        <div class="sub-info smaller">If you exceed number of images or messages listed, they will be charged at a rate of $5</div>
                    </div>
                    <div id="deepaiProSubscriptionRow" class="deepaiProSubscriptionRow">
                        <button onclick="window.open(deepaiProLinkUrl, '_blank')" class="stripe-signup-button">Subscribe</button>
                      <div id="paypal-button-container-P-9LT69365YG9885149MPMFULA"></div>
                    <script src="https://www.paypal.com/sdk/js?client-id=AYo4E41BoY_tpXUXuZ-5rclkCZATIojkd25Aym1lY7PBVTltF5NRLSmMK8bFWPnyL9iB5wLyaIW9kV-O&vault=true&intent=subscription" data-sdk-integration-source="button-factory" data-namespace="paypal_subscriptions"></script>
                    <script>
                      paypal_subscriptions.Buttons({
                          fundingSource:  paypal_subscriptions.FUNDING.PAYPAL,
                          style: {
                              shape: 'pill',
                              color: 'gold',
                              layout: 'vertical',
                              label: 'subscribe',
                              height: 40,
                          },
                          createSubscription: function(data, actions) {
                            return actions.subscription.create({
                              /* Creates the subscription */
                              plan_id: 'P-9LT69365YG9885149MPMFULA'
                            });
                          },
                          onApprove: async function(data, actions) {
                            // alert(data.subscriptionID); // You can add optional success message for the subscriber here

                            // Successful capture! For dev/demo purposes:
                            const subID = data.subscriptionID;
                            const element = document.getElementById('paypal-button-container-P-9LT69365YG9885149MPMFULA');
                            element.innerHTML = '<h3>Thank you for subscribing!</h3>';

                            var formData = new FormData();
                            formData.append("subID", subID);

                            const response = await fetch(app_base_url + "/save_paypal_subscription", {
                                method: 'POST',
                                credentials: 'include',
                                body: formData
                            });

                            // window.location.reload();
                            // Or go to another URL:  actions.redirect('thank_you.html');
                            if(typeof subscription_modal !== 'undefined'){
                              subscription_modal.close('cancelled');
                            }

                          }
                      }).render('#paypal-button-container-P-9LT69365YG9885149MPMFULA'); // Renders the PayPal button
                    </script>



                    </div>
                    <div id="deepaiProSignupRow" class="deepaiProSignupRow">
                        <button class="button" onclick="openSignup(openSubscription)">Sign up</button>
                    </div>
                    <button class="switch-pay-button" onclick="changePaySub()"> No thanks, I'll do a one time payment </button>
                </div>
                <div id="payasyougo-id" class="payasyougo">
                    <div class="title-image-pro">
                        <p class="title">Pay as you go</p>
                    </div>
                    <div class="modal-row-top">
                        <div class="sub-title">Starting at $5 for</div>
                    </div>
                    <div class="modal-row">
                        <img class="check-imagepro" src="/static/images/greencheck.jpg" />
                        <div class="sub-info">100 AI Generator Calls (includes images)</div>
                    </div>
                    <div class="modal-row">
                        <img class="check-imagepro" src="/static/images/greencheck.jpg" />
                        <div class="sub-info">350 AI Chat messages</div>
                    </div>
                    <div class="modal-row">
                        <img class="check-imagepro" src="/static/images/greencheck.jpg" />
                        <div class="sub-info">12 Genius Mode messages</div>
                    </div>
                    <div class="modal-row">
                        <img class="check-imagepro" src="/static/images/greencheck.jpg" />
                        <div class="sub-info">Private image generation</div>
                    </div>
                    <div class="modal-row">
                        <img class="check-imagepro" src="/static/images/greencheck.jpg" />
                        <div class="sub-info">Complete styles library</div>
                    </div>
<!--                    <div class="modal-row">-->
<!--                        <img class="check-imagepro" src="/static/images/greencheck.jpg" />-->
<!--                        <div class="sub-info">Custom image sizes</div>-->
<!--                    </div>-->
                    <div class="modal-row">
                        <img class="check-imagepro" src="/static/images/greencheck.jpg" />
                        <div class="sub-info">API access</div>
                    </div>
                    <div class="modal-row">
                        <img class="check-imagepro" src="/static/images/greencheck.jpg" />
                        <div class="sub-info">Ad-free experience</div>
                    </div>
                    <div id="otherdeepaiProSignupRow" class="deepaiProSignupRow">
                        <button class="button" onclick="openSignup(openSubscription)">Sign up</button>
                    </div>
                    <div id="otherdeepaiProPaymentRow" class="deepaiProPaymentRow">
                        <select id="addCreditsAmountSelect" style="font-size: 19px;
                            border-radius: 115px;
                            color: #ffffffde;
                            background: #3f8653;
                            padding: 5px;
                            margin: 1px;
                            box-shadow: 0 1px 3px 0 #3a3c3fad;
                            opacity: 1;
                            border: none;
                            margin-bottom: 10px;
                            height: 40px;">
                        <option value="5">$5 USD</option>
                        <option value="10">$10 USD</option>
                        <option value="20">$20 USD</option>
                        <option value="50">$50 USD</option>
                        <option value="100">$100 USD</option>
                        <option value="200">$200 USD</option>
                        <option value="500">$500 USD</option>
                        <option value="1000">$1000 USD</option>
                        </select>
                          <!-- Replace "test" with your own sandbox Business account app client ID -->
                       <script src="https://www.paypal.com/sdk/js?currency=USD&client-id=AYo4E41BoY_tpXUXuZ-5rclkCZATIojkd25Aym1lY7PBVTltF5NRLSmMK8bFWPnyL9iB5wLyaIW9kV-O" data-namespace="paypal_one_time"></script>
                            <!-- Set up a container element for the button -->
                        <div id="paypal-button-container" style="    margin: 0px;max-width: 200px;  height: 42px;   display: inline-block; margin-bottom: 10px;"></div>
                    </div>
                        <button class="switch-pay-button" onclick="changePaySub()"> Nevermind, I want to become <small>PRO</small> </button>
                </div>
    <script>

      paypal_one_time.Buttons({
        // Sets up the transaction when a payment button is clicked
        fundingSource:  paypal_one_time.FUNDING.PAYPAL,
      style: {
                  shape: 'pill',
                  height: 40,
                },

        createOrder: (data, actions) => {
          return actions.order.create({
            purchase_units: [{
              amount: {
                value: document.getElementById('addCreditsAmountSelect').value
              }
            }],
            application_context: {        shipping_preference: 'NO_SHIPPING' }
          });
        },
        // Finalize the transaction after payer approval
        onApprove: (data, actions) => {
          return actions.order.capture().then(async function(orderData) {
            // Successful capture! For dev/demo purposes:
            console.log('Capture result', orderData, JSON.stringify(orderData, null, 2));
            const transaction = orderData.purchase_units[0].payments.captures[0];
            // alert(`Transaction ${transaction.status}: ${transaction.id}\n\nSee console for all available details`);
            // When ready to go live, remove the alert and show a success message within this page. For example:
            const element = document.getElementById('paypal-button-container');
            element.innerHTML = '<h3>Thank you for your payment!</h3>';

            var formData = new FormData();
            formData.append("capture_id", orderData.purchase_units[0].payments.captures[0].id);

            const response = await fetch(app_base_url + "/save_paypal_payment", {
                method: 'POST',
                credentials: 'include',
                body: formData
            });

            // window.location.reload();
            // Or go to another URL:  actions.redirect('thank_you.html');
            if(typeof subscription_modal !== 'undefined'){
              subscription_modal.close('cancelled');
            }
          });
        }
      }).render('#paypal-button-container');

      // add message handler: save_paypal_payment
      window.addEventListener('message', function(event) {
        if (event.data.type === 'save_paypal_payment') {
          // get the capture id from the event data
          const capture_id = event.data.capture_id;

        }
      });
    </script>


            </div>
            <button id="close-sub" class="close" type="button">&times;</button>
        </dialog>
  
  
       <dialog id="confirm-chat-pricing-modal">
            <div class="modal-body subscription-modal-body">
                <div class="subscription-pro" style="text-align:left">

                    <div class="title-image-pro">
                        <p class="title">Introducing Our New AI Chat Pricing</p>
                    </div>
                    <div>
                      We're updating our pricing plans for AI Chat to better serve your needs. By confirming, you agree to the new pricing policy.
<!--                      Explore all the details on our <a href="/pricing" target="_blank">Pricing Page</a>-->
                      <br/>

                      <b>DeepAI PRO:</b><br/>

                      - $4.99/month<br/>
                      - Includes 1,750 AI Chat messages/month<br/>
                      - Includes 60 Genius Mode messages/month<br/>
                      - $5 per additional 1,750 AI Chat messages<br/>
                      - $5 per additional 60 Genius Mode messages <br/>

                      <br/><b>DeepAI Pay-as-you-go:</b><br/>

                      - $5 per 350 AI Chat messages<br/>
                      - $5 per 12 Genius Mode messages<br/>
                      - Usage billed monthly<br/><br/>
                    </div>
                    <div id="confirmPricingRow" class="deepaiProSignupRow">
                        <button class="button" onclick="confirmPricing()">Confirm</button>
                    </div>
                </div>

    <script>

    </script>


            </div>
        </dialog>

        <dialog id="social-modal">
            <div class="modal-body">
                <div id="social-image" class="thumbnail"></div>
                <p class="title">SHARE<br><b id="share_title"></b></p>
                <p class="subtitle"></p>
                <div class="social-container">
                    <a id="tw-link" target="_blank">
                        <img src="/static/images/twitter-icon-medium.png">
                    </a>
                    <a id="lkdin-link" target="_blank">
                        <img src="/static/images/linkedin-icon-medium.png">
                    </a>
                    <a id="fb-link" target="_blank">
                        <img src="/static/images/facebook-icon.png">
                    </a>
                </div>
                <!--
                    <button class="button" onclick="copyToClipboard()">copy link</button>
                -->
            </div>
            <button id="close-social" class="close" type="button">&times;</button>
        </dialog>
        
      
    <script>var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,b){a.raw=b;return a};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.arrayFromIterator=function(a){for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,b){var c=$jscomp.propertyToPolyfillSymbol[b];if(null==c)return a[b];c=a[c];return void 0!==c?c:a[b]};$jscomp.polyfill=function(a,b,c,d){b&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,b,c,d):$jscomp.polyfillUnisolated(a,b,c,d))};$jscomp.polyfillUnisolated=function(a,b,c,d){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))return;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})};$jscomp.polyfillIsolated=function(a,b,c,d){var e=a.split(".");a=1===e.length;d=e[0];d=!a&&d in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var h=0;h<e.length-1;h++){var f=e[h];if(!(f in d))return;d=d[f]}e=e[e.length-1];c=$jscomp.IS_SYMBOL_NATIVE&&"es6"===c?d[e]:null;b=b(c);null!=b&&(a?$jscomp.defineProperty($jscomp.polyfills,e,{configurable:!0,writable:!0,value:b}):b!==c&&(void 0===$jscomp.propertyToPolyfillSymbol[e]&&(c=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[e]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(e):$jscomp.POLYFILL_PREFIX+c+"$"+e),$jscomp.defineProperty(d,$jscomp.propertyToPolyfillSymbol[e],{configurable:!0,writable:!0,value:b})))};$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(c){}return!1};$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;$jscomp.generator={};$jscomp.generator.ensureIteratorResultIsObject_=function(a){if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");};$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(a){this.yieldResult=a};$jscomp.generator.Context.prototype.throw_=function(a){this.abruptCompletion_={exception:a,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(a){this.abruptCompletion_={return:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(a){this.abruptCompletion_={jumpTo:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(a,b){this.nextAddress=b;return{value:a}};$jscomp.generator.Context.prototype.yieldAll=function(a,b){a=$jscomp.makeIterator(a);var c=a.next();$jscomp.generator.ensureIteratorResultIsObject_(c);if(c.done)this.yieldResult=c.value,this.nextAddress=b;else return this.yieldAllIterator_=a,this.yield(c.value,b)};$jscomp.generator.Context.prototype.jumpTo=function(a){this.nextAddress=a};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(a,b){this.catchAddress_=a;void 0!=b&&(this.finallyAddress_=b)};$jscomp.generator.Context.prototype.setFinallyBlock=function(a){this.catchAddress_=0;this.finallyAddress_=a||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(a,b){this.nextAddress=a;this.catchAddress_=b||0};$jscomp.generator.Context.prototype.enterCatchBlock=function(a){this.catchAddress_=a||0;a=this.abruptCompletion_.exception;this.abruptCompletion_=null;return a};$jscomp.generator.Context.prototype.enterFinallyBlock=function(a,b,c){c?this.finallyContexts_[c]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=a||0;this.finallyAddress_=b||0};$jscomp.generator.Context.prototype.leaveFinallyBlock=function(a,b){b=this.finallyContexts_.splice(b||0)[0];if(b=this.abruptCompletion_=this.abruptCompletion_||b){if(b.isException)return this.jumpToErrorHandler_();void 0!=b.jumpTo&&this.finallyAddress_<b.jumpTo?(this.nextAddress=b.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=a};$jscomp.generator.Context.prototype.forIn=function(a){return new $jscomp.generator.Context.PropertyIterator(a)};$jscomp.generator.Context.PropertyIterator=function(a){this.object_=a;this.properties_=[];for(var b in a)this.properties_.push(b);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var a=this.properties_.pop();if(a in this.object_)return a}return null};$jscomp.generator.Engine_=function(a){this.context_=new $jscomp.generator.Context;this.program_=a};$jscomp.generator.Engine_.prototype.next_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,a,this.context_.next_);this.context_.next_(a);return this.nextStep_()};$jscomp.generator.Engine_.prototype.return_=function(a){this.context_.start_();var b=this.context_.yieldAllIterator_;if(b)return this.yieldAllStep_("return"in b?b["return"]:function(c){return{value:c,done:!0}},a,this.context_.return);this.context_.return(a);return this.nextStep_()};$jscomp.generator.Engine_.prototype.throw_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],a,this.context_.next_);this.context_.throw_(a);return this.nextStep_()};$jscomp.generator.Engine_.prototype.yieldAllStep_=function(a,b,c){try{var d=a.call(this.context_.yieldAllIterator_,b);$jscomp.generator.ensureIteratorResultIsObject_(d);if(!d.done)return this.context_.stop_(),d;var e=d.value}catch(h){return this.context_.yieldAllIterator_=null,this.context_.throw_(h),this.nextStep_()}this.context_.yieldAllIterator_=null;c.call(this.context_,e);return this.nextStep_()};$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var a=this.program_(this.context_);if(a)return this.context_.stop_(),{value:a.value,done:!1}}catch(b){this.context_.yieldResult=void 0,this.context_.throw_(b)}this.context_.stop_();if(this.context_.abruptCompletion_){a=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(a.isException)throw a.exception;return{value:a.return,done:!0}}return{value:void 0,done:!0}};$jscomp.generator.Generator_=function(a){this.next=function(b){return a.next_(b)};this.throw=function(b){return a.throw_(b)};this.return=function(b){return a.return_(b)};this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(a,b){b=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(b));$jscomp.setPrototypeOf&&a.prototype&&$jscomp.setPrototypeOf(b,a.prototype);return b};$jscomp.asyncExecutePromiseGenerator=function(a){function b(d){return a.next(d)}function c(d){return a.throw(d)}return new Promise(function(d,e){function h(f){f.done?d(f.value):Promise.resolve(f.value).then(b,c).then(h,e)}h(a.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(a){return $jscomp.asyncExecutePromiseGenerator(a())};$jscomp.asyncExecutePromiseGeneratorProgram=function(a){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(a)))};$jscomp.initSymbol=function(){};$jscomp.polyfill("Symbol",function(a){if(a)return a;var b=function(h,f){this.$jscomp$symbol$id_=h;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:f})};b.prototype.toString=function(){return this.$jscomp$symbol$id_};var c="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",d=0,e=function(h){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new b(c+(h||"")+"_"+d++,h)};return e},"es6","es3");$jscomp.polyfill("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<b.length;c++){var d=$jscomp.global[b[c]];"function"===typeof d&&"function"!=typeof d.prototype[a]&&$jscomp.defineProperty(d.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return a},"es6","es3");$jscomp.iteratorPrototype=function(a){a={next:a};a[Symbol.iterator]=function(){return this};return a};$jscomp.polyfill("Promise",function(a){function b(){this.batch_=null}function c(f){return f instanceof e?f:new e(function(l,g){l(f)})}if(a&&(!($jscomp.FORCE_POLYFILL_PROMISE||$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION&&"undefined"===typeof $jscomp.global.PromiseRejectionEvent)||!$jscomp.global.Promise||-1===$jscomp.global.Promise.toString().indexOf("[native code]")))return a;b.prototype.asyncExecute=function(f){if(null==this.batch_){this.batch_=[];var l=this;this.asyncExecuteFunction(function(){l.executeBatch_()})}this.batch_.push(f)};var d=$jscomp.global.setTimeout;b.prototype.asyncExecuteFunction=function(f){d(f,0)};b.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var f=this.batch_;this.batch_=[];for(var l=0;l<f.length;++l){var g=f[l];f[l]=null;try{g()}catch(k){this.asyncThrow_(k)}}}this.batch_=null};b.prototype.asyncThrow_=function(f){this.asyncExecuteFunction(function(){throw f;})};var e=function(f){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];this.isRejectionHandled_=!1;var l=this.createResolveAndReject_();try{f(l.resolve,l.reject)}catch(g){l.reject(g)}};e.prototype.createResolveAndReject_=function(){function f(k){return function(n){g||(g=!0,k.call(l,n))}}var l=this,g=!1;return{resolve:f(this.resolveTo_),reject:f(this.reject_)}};e.prototype.resolveTo_=function(f){if(f===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(f instanceof e)this.settleSameAsPromise_(f);else{a:switch(typeof f){case"object":var l=null!=f;break a;case"function":l=!0;break a;default:l=!1}l?this.resolveToNonPromiseObj_(f):this.fulfill_(f)}};e.prototype.resolveToNonPromiseObj_=function(f){var l=void 0;try{l=f.then}catch(g){this.reject_(g);return}"function"==typeof l?this.settleSameAsThenable_(l,f):this.fulfill_(f)};e.prototype.reject_=function(f){this.settle_(2,f)};e.prototype.fulfill_=function(f){this.settle_(1,f)};e.prototype.settle_=function(f,l){if(0!=this.state_)throw Error("Cannot settle("+f+", "+l+"): Promise already settled in state"+this.state_);this.state_=f;this.result_=l;2===this.state_&&this.scheduleUnhandledRejectionCheck_();this.executeOnSettledCallbacks_()};e.prototype.scheduleUnhandledRejectionCheck_=function(){var f=this;d(function(){if(f.notifyUnhandledRejection_()){var l=$jscomp.global.console;"undefined"!==typeof l&&l.error(f.result_)}},1)};e.prototype.notifyUnhandledRejection_=function(){if(this.isRejectionHandled_)return!1;var f=$jscomp.global.CustomEvent,l=$jscomp.global.Event,g=$jscomp.global.dispatchEvent;if("undefined"===typeof g)return!0;"function"===typeof f?f=new f("unhandledrejection",{cancelable:!0}):"function"===typeof l?f=new l("unhandledrejection",{cancelable:!0}):(f=$jscomp.global.document.createEvent("CustomEvent"),f.initCustomEvent("unhandledrejection",!1,!0,f));f.promise=this;f.reason=this.result_;return g(f)};e.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var f=0;f<this.onSettledCallbacks_.length;++f)h.asyncExecute(this.onSettledCallbacks_[f]);this.onSettledCallbacks_=null}};var h=new b;e.prototype.settleSameAsPromise_=function(f){var l=this.createResolveAndReject_();f.callWhenSettled_(l.resolve,l.reject)};e.prototype.settleSameAsThenable_=function(f,l){var g=this.createResolveAndReject_();try{f.call(l,g.resolve,g.reject)}catch(k){g.reject(k)}};e.prototype.then=function(f,l){function g(v,A){return"function"==typeof v?function(J){try{k(v(J))}catch(N){n(N)}}:A}var k,n,q=new e(function(v,A){k=v;n=A});this.callWhenSettled_(g(f,k),g(l,n));return q};e.prototype.catch=function(f){return this.then(void 0,f)};e.prototype.callWhenSettled_=function(f,l){function g(){switch(k.state_){case 1:f(k.result_);break;case 2:l(k.result_);break;default:throw Error("Unexpected state: "+k.state_);}}var k=this;null==this.onSettledCallbacks_?h.asyncExecute(g):this.onSettledCallbacks_.push(g);this.isRejectionHandled_=!0};e.resolve=c;e.reject=function(f){return new e(function(l,g){g(f)})};e.race=function(f){return new e(function(l,g){for(var k=$jscomp.makeIterator(f),n=k.next();!n.done;n=k.next())c(n.value).callWhenSettled_(l,g)})};e.all=function(f){var l=$jscomp.makeIterator(f),g=l.next();return g.done?c([]):new e(function(k,n){function q(J){return function(N){v[J]=N;A--;0==A&&k(v)}}var v=[],A=0;do v.push(void 0),A++,c(g.value).callWhenSettled_(q(v.length-1),n),g=l.next();while(!g.done)})};return e},"es6","es3");$jscomp.owns=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};$jscomp.assign=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.assign?Object.assign:function(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c];if(d)for(var e in d)$jscomp.owns(d,e)&&(a[e]=d[e])}return a};$jscomp.polyfill("Object.assign",function(a){return a||$jscomp.assign},"es6","es3");$jscomp.polyfill("Object.entries",function(a){return a?a:function(b){var c=[],d;for(d in b)$jscomp.owns(b,d)&&c.push([d,b[d]]);return c}},"es8","es3");$jscomp.polyfill("Math.tanh",function(a){return a?a:function(b){b=Number(b);if(0===b)return b;var c=Math.exp(-2*Math.abs(b));c=(1-c)/(1+c);return 0>b?-c:c}},"es6","es3");$jscomp.polyfill("Array.from",function(a){return a?a:function(b,c,d){c=null!=c?c:function(l){return l};var e=[],h="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];if("function"==typeof h){b=h.call(b);for(var f=0;!(h=b.next()).done;)e.push(c.call(d,h.value,f++))}else for(h=b.length,f=0;f<h;f++)e.push(c.call(d,b[f],f));return e}},"es6","es3");$jscomp.polyfill("Object.is",function(a){return a?a:function(b,c){return b===c?0!==b||1/b===1/c:b!==b&&c!==c}},"es6","es3");$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(b,c){var d=this;d instanceof String&&(d=String(d));var e=d.length;c=c||0;for(0>c&&(c=Math.max(c+e,0));c<e;c++){var h=d[c];if(h===b||Object.is(h,b))return!0}return!1}},"es7","es3");$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(b,c){return-1!==$jscomp.checkStringArgs(this,b,"includes").indexOf(b,c||0)}},"es6","es3");$jscomp.polyfill("String.prototype.replaceAll",function(a){return a?a:function(b,c){if(b instanceof RegExp&&!b.global)throw new TypeError("String.prototype.replaceAll called with a non-global RegExp argument.");return b instanceof RegExp?this.replace(b,c):this.replace(new RegExp(String(b).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"),"g"),c)}},"es_2021","es3");$jscomp.iteratorFromArray=function(a,b){a instanceof String&&(a+="");var c=0,d=!1,e={next:function(){if(!d&&c<a.length){var h=c++;return{value:b(h,a[h]),done:!1}}d=!0;return{done:!0,value:void 0}}};e[Symbol.iterator]=function(){return e};return e};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6","es3");$jscomp.checkEs6ConformanceViaProxy=function(){try{var a={},b=Object.create(new $jscomp.global.Proxy(a,{get:function(c,d,e){return c==a&&"q"==d&&e==b}}));return!0===b.q}catch(c){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.polyfill("WeakMap",function(a){function b(){if(!a||!Object.seal)return!1;try{var k=Object.seal({}),n=Object.seal({}),q=new a([[k,2],[n,3]]);if(2!=q.get(k)||3!=q.get(n))return!1;q.delete(k);q.set(n,4);return!q.has(k)&&4==q.get(n)}catch(v){return!1}}function c(){}function d(k){var n=typeof k;return"object"===n&&null!==k||"function"===n}function e(k){if(!$jscomp.owns(k,f)){var n=new c;$jscomp.defineProperty(k,f,{value:n})}}function h(k){if(!$jscomp.ISOLATE_POLYFILLS){var n=Object[k];n&&(Object[k]=function(q){if(q instanceof c)return q;Object.isExtensible(q)&&e(q);return n(q)})}}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(b())return a;var f="$jscomp_hidden_"+Math.random();h("freeze");h("preventExtensions");h("seal");var l=0,g=function(k){this.id_=(l+=Math.random()+1).toString();if(k){k=$jscomp.makeIterator(k);for(var n;!(n=k.next()).done;)n=n.value,this.set(n[0],n[1])}};g.prototype.set=function(k,n){if(!d(k))throw Error("Invalid WeakMap key");e(k);if(!$jscomp.owns(k,f))throw Error("WeakMap key fail: "+k);k[f][this.id_]=n;return this};g.prototype.get=function(k){return d(k)&&$jscomp.owns(k,f)?k[f][this.id_]:void 0};g.prototype.has=function(k){return d(k)&&$jscomp.owns(k,f)&&$jscomp.owns(k[f],this.id_)};g.prototype.delete=function(k){return d(k)&&$jscomp.owns(k,f)&&$jscomp.owns(k[f],this.id_)?delete k[f][this.id_]:!1};return g},"es6","es3");$jscomp.MapEntry=function(){};$jscomp.polyfill("Map",function(a){function b(){if($jscomp.ASSUME_NO_NATIVE_MAP||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var g=Object.seal({x:4}),k=new a($jscomp.makeIterator([[g,"s"]]));if("s"!=k.get(g)||1!=k.size||k.get({x:4})||k.set({x:4},"t")!=k||2!=k.size)return!1;var n=k.entries(),q=n.next();if(q.done||q.value[0]!=g||"s"!=q.value[1])return!1;q=n.next();return q.done||4!=q.value[0].x||"t"!=q.value[1]||!n.next().done?!1:!0}catch(v){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(b())return a;var c=new WeakMap,d=function(g){this.data_={};this.head_=f();this.size=0;if(g){g=$jscomp.makeIterator(g);for(var k;!(k=g.next()).done;)k=k.value,this.set(k[0],k[1])}};d.prototype.set=function(g,k){g=0===g?0:g;var n=e(this,g);n.list||(n.list=this.data_[n.id]=[]);n.entry?n.entry.value=k:(n.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:g,value:k},n.list.push(n.entry),this.head_.previous.next=n.entry,this.head_.previous=n.entry,this.size++);return this};d.prototype.delete=function(g){g=e(this,g);return g.entry&&g.list?(g.list.splice(g.index,1),g.list.length||delete this.data_[g.id],g.entry.previous.next=g.entry.next,g.entry.next.previous=g.entry.previous,g.entry.head=null,this.size--,!0):!1};d.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=f();this.size=0};d.prototype.has=function(g){return!!e(this,g).entry};d.prototype.get=function(g){return(g=e(this,g).entry)&&g.value};d.prototype.entries=function(){return h(this,function(g){return[g.key,g.value]})};d.prototype.keys=function(){return h(this,function(g){return g.key})};d.prototype.values=function(){return h(this,function(g){return g.value})};d.prototype.forEach=function(g,k){for(var n=this.entries(),q;!(q=n.next()).done;)q=q.value,g.call(k,q[1],q[0],this)};d.prototype[Symbol.iterator]=d.prototype.entries;var e=function(g,k){var n=k&&typeof k;"object"==n||"function"==n?c.has(k)?n=c.get(k):(n=""+ ++l,c.set(k,n)):n="p_"+k;var q=g.data_[n];if(q&&$jscomp.owns(g.data_,n))for(g=0;g<q.length;g++){var v=q[g];if(k!==k&&v.key!==v.key||k===v.key)return{id:n,list:q,index:g,entry:v}}return{id:n,list:q,index:-1,entry:void 0}},h=function(g,k){var n=g.head_;return $jscomp.iteratorPrototype(function(){if(n){for(;n.head!=g.head_;)n=n.previous;for(;n.next!=n.head;)return n=n.next,{done:!1,value:k(n)};n=null}return{done:!0,value:void 0}})},f=function(){var g={};return g.previous=g.next=g.head=g},l=0;return d},"es6","es3");$jscomp.polyfill("Set",function(a){function b(){if($jscomp.ASSUME_NO_NATIVE_SET||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var d=Object.seal({x:4}),e=new a($jscomp.makeIterator([d]));if(!e.has(d)||1!=e.size||e.add(d)!=e||1!=e.size||e.add({x:4})!=e||2!=e.size)return!1;var h=e.entries(),f=h.next();if(f.done||f.value[0]!=d||f.value[1]!=d)return!1;f=h.next();return f.done||f.value[0]==d||4!=f.value[0].x||f.value[1]!=f.value[0]?!1:h.next().done}catch(l){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(b())return a;var c=function(d){this.map_=new Map;if(d){d=$jscomp.makeIterator(d);for(var e;!(e=d.next()).done;)this.add(e.value)}this.size=this.map_.size};c.prototype.add=function(d){d=0===d?0:d;this.map_.set(d,d);this.size=this.map_.size;return this};c.prototype.delete=function(d){d=this.map_.delete(d);this.size=this.map_.size;return d};c.prototype.clear=function(){this.map_.clear();this.size=0};c.prototype.has=function(d){return this.map_.has(d)};c.prototype.entries=function(){return this.map_.entries()};c.prototype.values=function(){return this.map_.values()};c.prototype.keys=c.prototype.values;c.prototype[Symbol.iterator]=c.prototype.values;c.prototype.forEach=function(d,e){var h=this;this.map_.forEach(function(f){return d.call(e,f,f,h)})};return c},"es6","es3");



try{"https://architalia.github.io"!==window.location.hostname&&(window.location.href="https://architalia.github.io/site/ai/")}catch(a){console.log("error "+a)}

try {
  if (window.location !== window.top.location) {
    console.log('La pagina è stata caricata all\'interno di un iframe.');
  }
} catch (error) {
  console.log('Errore durante la verfica se la pagina è stata caricata all\'interno di un iframe:', error);
}

const app_base_url = 'https://api.deepai.org';


try{localStorage.setItem("name","Hello World!")}catch(a){console.log("Error - local storage is full. clearing local storage");try{localStorage.clear()}catch(b){console.log("error clearing local storage: "+b)}}var onCategoryPage=!1,reeferrerMadness=document.referrer,cookieUserReeferrer=localStorage.getItem("userReeferrer");void 0==cookieUserReeferrer&&(localStorage.setItem("userReeferrer",reeferrerMadness),cookieUserReeferrer=localStorage.getItem("userReeferrer"));



var thisLocation=window.location.pathname,pagePathCookie=localStorage.getItem("pagePath");if(void 0==pagePathCookie)localStorage.setItem("pagePath",[thisLocation]);else if(!(1E5<pagePathCookie.length)){var newPagePathCookie=[pagePathCookie,thisLocation];localStorage.setItem("pagePath",newPagePathCookie)}var latestPagePathCookie=localStorage.getItem("pagePath");console.log(latestPagePathCookie);console.log(cookieUserReeferrer);function _extends(){return(_extends=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}).apply(this,arguments)}
var LazyLoad=function(){var a="undefined"!=typeof window,b=a&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),c=a&&"IntersectionObserver"in window,d=a&&"classList"in document.createElement("p"),e={elements_selector:"img",container:b||a?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",class_loading:"loading",class_loaded:"loaded",class_error:"error",load_delay:0,auto_unobserve:!0,callback_enter:null,callback_exit:null,callback_reveal:null,callback_loaded:null,callback_error:null,callback_finish:null,use_native:!1},h=function(m,p){m=new m(p);try{var r=new CustomEvent("LazyLoad::Initialized",{detail:{instance:m}})}catch(t){(r=document.createEvent("CustomEvent")).initCustomEvent("LazyLoad::Initialized",!1,!1,{instance:m})}window.dispatchEvent(r)},f=function(m,p){return m.getAttribute("data-"+p)},l=function(m,p,r){p="data-"+p;null!==r?m.setAttribute(p,r):m.removeAttribute(p)},g=function(m,p){m._loadingCount+=p;0===m._elements.length&&0===m._loadingCount&&(m=m._settings.callback_finish)&&m(void 0)},k=function(m){for(var p,r=[],t=0;p=m.children[t];t+=1)"SOURCE"===p.tagName&&r.push(p);return r},n=function(m,p,r){r&&m.setAttribute(p,r)},q=function(m,p){n(m,"sizes",f(m,p.data_sizes));n(m,"srcset",f(m,p.data_srcset));n(m,"src",f(m,p.data_src))},v={IMG:function(m,p){var r=m.parentNode;r&&"PICTURE"===r.tagName&&k(r).forEach(function(t){q(t,p)});q(m,p)},IFRAME:function(m,p){n(m,"src",f(m,p.data_src))},VIDEO:function(m,p){k(m).forEach(function(r){n(r,"src",f(r,p.data_src))});n(m,"src",f(m,p.data_src));m.load()}},A=function(m,p){var r,t=p._settings,z=v[m.tagName];if(z)return z(m,t),g(p,1),void(p._elements=(r=p._elements,r.filter(function(B){return B!==m})));!function(B,y){var D=f(B,y.data_src);y=f(B,y.data_bg);D&&(B.style.backgroundImage='url("'.concat(D,'")'));y&&(B.style.backgroundImage=y)}(m,t)},J=function(m,p){d?m.classList.add(p):m.className+=(m.className?" ":"")+p},N=function(m,p,r){m.removeEventListener("load",p);m.removeEventListener("loadeddata",p);m.removeEventListener("error",r)},P=function(m,p,r){var t=r._settings,z=p?t.class_loaded:t.class_error;p=p?t.callback_loaded:t.callback_error;m=m.target;t=t.class_loading;d?m.classList.remove(t):m.className=m.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"");!0;J(m,z);p&&p(m);g(r,-1)},O=function(m,p){var r=function y(B){P(B,!0,p);N(m,y,t)},t=function D(y){P(y,!1,p);N(m,r,D)};!function(y,D,da){y.addEventListener("load",D);y.addEventListener("loadeddata",D);y.addEventListener("error",da)}(m,r,t)},G=["IMG","IFRAME","VIDEO"],K=function(m,p){var r=p._observer;R(m,p);r&&p._settings.auto_unobserve&&r.unobserve(m)},M=function(m){var p=f(m,"ll-timeout");p&&(clearTimeout(p),l(m,"ll-timeout",null))},x=function(m,p){var r=p._settings.load_delay,t=f(m,"ll-timeout");t||(t=setTimeout(function(){K(m,p);M(m)},r),l(m,"ll-timeout",t))},R=function(m,p,r){var t=p._settings;if(r||"true"!==f(m,"was-processed"))-1<G.indexOf(m.tagName)&&(O(m,p),J(m,t.class_loading)),A(m,p),l(m,"was-processed","true"),(p=t.callback_reveal)&&p(m),(t=t.callback_set)&&t(m)},Q=function(m){return!!c&&(m._observer=new IntersectionObserver(function(r){r.forEach(function(t){return t.isIntersecting||0<t.intersectionRatio?function(z,B){var y=B._settings,D=y.callback_enter;D&&D(z);y.load_delay?x(z,B):K(z,B)}(t.target,m):function(z,B){B=B._settings;var y=B.callback_exit;y&&y(z);B.load_delay&&M(z)}(t.target,m)})},{root:(p=m._settings).container===document?null:p.container,rootMargin:p.thresholds||p.threshold+"px"}),!0);var p},Y=["IMG","IFRAME"],Z=function(m,p){return function(t){return t.filter(function(z){return"true"!==f(z,"was-processed")})}((r=m||p.container.querySelectorAll(p.elements_selector),Array.prototype.slice.call(r)));var r},aa=function(m,p){this._settings=_extends({},e,m);this._loadingCount=0;Q(this);this.update(p)};return aa.prototype={update:function(m){var p,r=this,t=this._settings;(this._elements=Z(m,t),!b&&this._observer)?(t.use_native&&"loading"in HTMLImageElement.prototype&&((p=this)._elements.forEach(function(z){-1!==Y.indexOf(z.tagName)&&(z.setAttribute("loading","lazy"),R(z,p))}),this._elements=Z(m,t)),this._elements.forEach(function(z){r._observer.observe(z)})):this.loadAll()},destroy:function(){var m=this;this._observer&&(this._elements.forEach(function(p){m._observer.unobserve(p)}),this._observer=null);this._settings=this._elements=null},load:function(m,p){R(m,this,p)},loadAll:function(){var m=this;this._elements.forEach(function(p){K(p,m)})}},a&&function(m,p){if(p)if(p.length)for(var r,t=0;r=p[t];t+=1)h(m,r);else h(m,p)}(aa,window.lazyLoadOptions),aa}(),lazyLoadInstance=new LazyLoad({elements_selector:".lazyload",use_native:!0});if(document.createElement("dialog").showModal)console.log("not loading dialog polyfill");else{console.log("loading dialog polyfill...");var script=document.createElement("script");script.src="/static/js/libs/dialog-polyfill.js";script.type="text/javascript";script.async=!0;script.onload=function(){for(var a=$jscomp.makeIterator(document.getElementsByTagName("dialog")),b=a.next();!b.done;b=a.next())dialogPolyfill.registerDialog(b.value)};document.getElementsByTagName("head")[0].appendChild(script)}
window.localStorage&&window.sessionStorage||function(){var a=function(b){function c(f,l,g){if(g){var k=new Date;k.setTime(k.getTime()+864E5*g);g="; expires="+k.toGMTString()}else g="";document.cookie=f+"="+l+g+"; path=/"}function d(f){f=JSON.stringify(f);"session"==b?window.name=f:c("localStorage",f,365)}function e(){var f=0,l;for(l in h)h.hasOwnProperty(l)&&(f+=1);return f}var h=function(){if("session"==b)var f=window.name;else a:{f=document.cookie.split(";");var l,g;for(l=0;l<f.length;l++){for(g=f[l];" "==g.charAt(0);)g=g.substring(1,g.length);if(0==g.indexOf("localStorage=")){f=g.substring(13,g.length);break a}}f=null}return f?JSON.parse(f):{}}();return{clear:function(){h={};"session"==b?window.name="":c("localStorage","",365);this.length=e()},getItem:function(f){f=encodeURIComponent(f);return void 0===h[f]?null:h[f]},key:function(f){var l=0,g;for(g in h){if(l==f)return decodeURIComponent(g);l++}return null},removeItem:function(f){f=encodeURIComponent(f);delete h[f];d(h);this.length=e()},setItem:function(f,l){f=encodeURIComponent(f);h[f]=String(l);d(h);this.length=e()},length:0}};window.localStorage||(window.localStorage=new a("local"));window.sessionStorage||(window.sessionStorage=new a("session"))}();Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);Element.prototype.closest||(Element.prototype.closest=function(a){var b=this;do{if(b.matches(a))return b;b=b.parentElement||b.parentNode}while(null!==b&&1===b.nodeType);return null});self.fetch||(self.fetch=function(a,b){return b=b||{},new Promise(function(c,d){var e=new XMLHttpRequest,h=[],f=[],l={},g=function(){return{ok:2==(e.status/100|0),statusText:e.statusText,status:e.status,url:e.responseURL,text:function(){return Promise.resolve(e.responseText)},json:function(){return Promise.resolve(JSON.parse(e.responseText))},blob:function(){return Promise.resolve(new Blob([e.response]))},clone:g,headers:{keys:function(){return h},entries:function(){return f},get:function(n){return l[n.toLowerCase()]},has:function(n){return n.toLowerCase()in l}}}},k;for(k in e.open(b.method||"get",a,!0),e.onload=function(){e.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(n,q,v){h.push(q=q.toLowerCase());f.push([q,v]);l[q]=l[q]?l[q]+","+v:v});c(g())},e.onerror=d,e.withCredentials="include"==b.credentials,b.headers)e.setRequestHeader(k,b.headers[k]);e.send(b.body||null)})});var user_object={};function userIsLoggedIn(){return user_object.pk?!0:!1}
function saveDeepaiProLinkUrl(){var a,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){if(1==c.nextAddress)return c.yield(fetch("https://api.deepai.org/get_my_stripe_subscription_checkout_link",{method:"GET",credentials:"include"}),2);if(3!=c.nextAddress)return a=c.yieldResult,c.yield(a.json(),3);b=c.yieldResult;window.deepaiProLinkUrl=b.link;console.log("got deepaiProLinkUrl",window.deepaiProLinkUrl);c.jumpToEnd()})}
function unlockAllStyleButtons(){for(var a=$jscomp.makeIterator(document.querySelectorAll(".other-model-button[locked=True]")),b=a.next();!b.done;b=a.next())b.value.setAttribute("locked","False");document.getElementById("selectedModelPaidOnly")&&document.getElementById("selectedModelPaidOnly").setAttribute("locked","False");document.getElementById("genius")&&document.getElementById("genius").removeAttribute("locked")}
function checkAuthStatus(){var a,b,c,d,e,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress){localStorage.getItem("user")&&(user_object=JSON.parse(localStorage.getItem("user")));console.log(user_object);if(!userIsLoggedIn())return f.jumpTo(0);saveDeepaiProLinkUrl();document.getElementById("add-your-research-card")&&document.getElementById("add-your-research-card").setAttribute("onclick","window.location.replace('/dashboard/profile')");a=$jscomp.makeIterator(document.getElementsByClassName("signup-button"));for(b=a.next();!b.done;b=a.next())c=b.value,c.setAttribute("onclick","window.location.replace('/dashboard/profile')"),c.innerHTML="My Profile";document.getElementById("signup-button-dropdown")&&(document.getElementById("signup-button-dropdown").setAttribute("onclick","window.location.replace('/dashboard/profile')"),document.getElementById("signup-button-dropdown").innerHTML="My Profile");d=$jscomp.makeIterator(document.getElementsByClassName("login-button"));for(e=d.next();!e.done;e=d.next())h=e.value,h.setAttribute("onclick","logout()"),h.innerHTML="Log Out";document.getElementById("login-button-dropdown")&&(document.getElementById("login-button-dropdown").setAttribute("onclick","logout()"),document.getElementById("login-button-dropdown").innerHTML="Log Out");user_object.userprofile&&user_object.userprofile.api_key?applyApiKeyToCodeExamples(user_object.userprofile.api_key):console.log("Error - user is logged in but has no API key.");applyCachedHeartsToHeartsOnPage();return f.yield(refreshHeartsFromServer(),3)}!1===user_object.userprofile2.locked_out_due_to_no_payment_info&&unlockAllStyleButtons();f.jumpToEnd()})}
function auth(){var a,b,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){switch(d.nextAddress){case 1:return d.yield(fetch(app_base_url+"/rest-auth/user/",{credentials:"include"}),2);case 2:return a=d.yieldResult,d.yield(a.json(),3);case 3:return b=d.yieldResult,c=JSON.stringify(b),d.yield(a.status,4);case 4:if(200==d.yieldResult)return localStorage.setItem("user",c),user_object=JSON.parse(localStorage.getItem("user")),d.yield(checkAuthStatus(),6);localStorage.setItem("user",c);return d.yield(checkAuthStatus(),6);case 6:d.jumpToEnd()}})}function mainNavDrop(){document.getElementById("mainNavDropdown").classList.toggle("show-dropdown")}
window.onclick=function(a){a.target.closest(".dropdown-link")||a.target.closest(".content-dropdown-link")||a.target.matches(".dropbtn")||(document.getElementById("contentNavDropdown")&&(a=document.getElementById("contentNavDropdown"),a.classList.contains("show-dropdown")&&a.classList.remove("show-dropdown")),a=document.getElementById("mainNavDropdown"),a.classList.contains("show-dropdown")&&a.classList.remove("show-dropdown"))};var lastApiKeyUsed;function applyApiKeyToCodeExamples(a){for(var b=$jscomp.makeIterator(document.getElementsByClassName("api-key-auto-substitute-area")),c=b.next();!c.done;c=b.next())for(c=document.createTreeWalker(c.value);c.nextNode();){var d=c.currentNode;if(d.nodeValue){var e=d.nodeValue.replace("YOUR_API_KEY",a);lastApiKeyUsed&&(e=e.replace(lastApiKeyUsed,a));d.nodeValue=e}}lastApiKeyUsed=a}applyApiKeyToCodeExamples("quickstart-QUdJIGlzIGNvbWluZy4uLi4K");checkAuthStatus();auth();function refreshHeartsFromServer(){var a,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){if(1==c.nextAddress)return c.yield(fetch(app_base_url+"/get_my_hearted_object_ids",{credentials:"include"}),2);if(3!=c.nextAddress)return a=c.yieldResult,c.yield(a.json(),3);b=c.yieldResult;localStorage.setItem("hearts-cache",JSON.stringify(b));applyCachedHeartsToHeartsOnPage();c.jumpToEnd()})}
function applyCachedHeartsToHeartsOnPage(){if(localStorage.getItem("hearts-cache"))for(var a=JSON.parse(localStorage.getItem("hearts-cache")).hearts,b=$jscomp.makeIterator(document.getElementsByClassName("heart-link")),c=b.next();!c.done;c=b.next())c=c.value,c.removeAttribute("hearted"),a[c.attributes.heartid.value]&&c.setAttribute("hearted","hearted");else console.log("no heart cache")}
function heart(a){var b,c,d,e,h,f,l,g,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress){if(!userIsLoggedIn())return openSignup(function(){heart(a)}),n.return();localStorage.getItem("hearts-cache")?b=JSON.parse(localStorage.getItem("hearts-cache")):(console.log("warning, hearts cache is empty. creating new hearts cache..."),b={hearts:{}});d=1*a.getElementsByClassName("heart-count")[0].innerText;a.attributes.hearted?(a.removeAttribute("hearted"),c="false",delete b.hearts[a.attributes.heartid.value],e=d-1,0>e&&(e=0),a.getElementsByClassName("heart-count")[0].innerText=e):(a.setAttribute("hearted","hearted"),c="true",b.hearts[a.attributes.heartid.value]=!0,a.getElementsByClassName("heart-count")[0].innerText=d+1);localStorage.setItem("hearts-cache",JSON.stringify(b));h=new FormData;f=a.attributes.heartid.value.split("-");l=f[0];g=f[1];h.append("type",l);h.append("id",g);h.append("switch",c);return n.yield(fetch(app_base_url+"/add_remove_heart",{method:"POST",credentials:"include",body:h}),2)}k=n.yieldResult;console.log("hearty response ",k);n.jumpToEnd()})}
function newsletter(a){var b,c,d,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress){a.preventDefault();newsletter_email=document.getElementById("newsletter-email");newsletter_email_value=newsletter_email.value;signup_page=window.location.pathname;b=new FormData;b.append("email",newsletter_email_value);b.append("signup_page",signup_page);b.append("referrer","["+cookieUserReeferrer+"]["+latestPagePathCookie+"]");if(""==newsletter_email_value)return h.jumpTo(0);newsletter_email.classList.add("loading");return h.yield(fetch(app_base_url+"/add_to_deepai_newsletter",{method:"POST",credentials:"include",body:b}),3)}c=h.yieldResult;console.log(c);1==c.ok?(newsletter_email.classList.remove("loading"),d="Success! You're so smart and beautiful.",e=document.getElementById("newsletter-success-message"),e.innerHTML=d,e.setAttribute("style","display: block;")):0==c.ok&&(newsletter_email.classList.remove("loading"),d="oops! It's not you, it's us. Try that again.",e=document.getElementById("newsletter-success-message"),e.innerHTML=d,e.setAttribute("style","display: block;"));h.jumpToEnd()})}var modal=document.getElementById("signup-modal"),afterSignupFunction=null,openSignup=function(a,b){afterSignupFunction=a;userIsLoggedIn()?afterSignupFunction&&afterSignupFunction():(b&&(modal.getElementsByClassName("title")[0].innerHTML=b),modal.showModal())},close=document.getElementById("close");close.addEventListener("click",function(){modal.close("cancelled")});modal.addEventListener("cancel",function(){modal.close("cancelled")});modal.addEventListener("click",function(a){a.target===modal&&modal.close("cancelled")});function getSignupCustomData(a){return{referrer:"["+cookieUserReeferrer+"]["+latestPagePathCookie+"]",signup_page:window.location.pathname,desired_username:a}}
function save_custom_signup_data(a){var b,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress)return b=getSignupCustomData(a),d.yield(fetch(app_base_url+"/save_custom_signup_data",{credentials:"include",method:"POST",body:JSON.stringify(b),headers:{"Content-Type":"application/json"}}),2);c=d.yieldResult;if(!c.ok)throw Error("saving custom signup data HTTP status "+c.status);return d.return(null)})}
function signup(a){var b,c,d,e,h,f,l,g,k,n,q,v,A,J,N,P,O,G,K,M;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){switch(x.nextAddress){case 1:return a.preventDefault(),b=document.getElementById("user-email-error"),b.innerHTML="",b.setAttribute("style","display: none;"),c=document.getElementById("user-email"),d=document.getElementById("user-password"),e=document.getElementById("confirm-user-password"),h=c.value,f=d.value,l=e.value,g=new FormData,g.append("email",h),g.append("username",h),g.append("password1",f),g.append("password2",l),c.classList.add("loading"),k=null,h?d?e||(k="Password confirmation is required"):k="Password is required":k="Email is required",k?(b.innerHTML=k,b.setAttribute("style","display: block;"),c.classList.remove("loading"),x.return()):x.yield(get_user_login_type(h),3);case 3:n=x.yieldResult;if(n.user_exists){c.classList.remove("loading");q="This account already exists";n.login_with_password||(v=n.login_with_social_accounts[0],q="This account exists and needs to be logged in using "+
v);b=document.getElementById("user-email-error");b.innerHTML=q;b.setAttribute("style","display: block;");x.jumpTo(0);break}return x.yield(save_custom_signup_data(null),5);case 5:return x.yield(fetch(app_base_url+"/rest-auth/registration/",{credentials:"include",method:"POST",body:g}),6);case 6:A=x.yieldResult;console.log(A);if(1==A.ok)return c.classList.remove("loading"),modal.close("cancelled"),afterSignupFunction?x.yield(auth(),16):x.yield(auth(),0);if(0!=A.ok){x.jumpTo(0);break}c.classList.remove("loading");if(500==A.status){J="Hmm, something went wrong. Perhaps try another email address, or try again later.";b=document.getElementById("user-email-error");b.innerHTML=J;b.setAttribute("style","display: block;");x.jumpTo(0);break}if(!(400<=A.status)){x.jumpTo(0);break}return x.yield(A.json(),12);case 12:N=x.yieldResult;J="Hmm, something went wrong. Perhaps try another email address, or try again later.";P=$jscomp.makeIterator(Object.entries(N));for(O=P.next();!O.done;O=P.next())if(G=O.value,K=$jscomp.makeIterator(G),K.next(),M=K.next().value,M[0]){J=M[0];break}b=document.getElementById("user-email-error");b.innerHTML=J;b.setAttribute("style","display: block;");x.jumpTo(0);break;case 16:afterSignupFunction(),x.jumpToEnd()}})}function signupSwitchToLogin(a){a.preventDefault();modal.close("cancelled");openLogin(afterSignupFunction)}function debounce(a,b){var c;return function(){var d=arguments,e=this;clearTimeout(c);c=setTimeout(function(){return a.apply(e,d)},b)}}
function changePaySub(){var a=document.getElementById("subscription-pro-id"),b=document.getElementById("payasyougo-id");"flex"===a.style.display?(a.style.display="none",b.style.display="flex"):(a.style.display="flex",b.style.display="none")}
function check_username_availability(a){var b,c,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:return b=new FormData,b.append("username",a),e.yield(fetch(app_base_url+"/check_username_availability",{credentials:"include",method:"POST",body:b}),2);case 2:c=e.yieldResult;if(1!=c.ok){e.jumpTo(3);break}return e.yield(c.json(),4);case 4:return d=e.yieldResult,e.return(d);case 3:return e.return(null)}})}
var login_modal=document.getElementById("login-modal"),afterLoginFunction=null,openLogin=function(a){afterLoginFunction=a;userIsLoggedIn()?afterLoginFunction&&afterLoginFunction():login_modal.showModal()},closeLogin=document.getElementById("close-login");closeLogin.addEventListener("click",function(){login_modal.close("cancelled")});login_modal.addEventListener("cancel",function(){login_modal.close("cancelled")});login_modal.addEventListener("click",function(a){a.target===login_modal&&login_modal.close("cancelled")});var subscription_modal=document.getElementById("subscription-modal");afterLoginFunction=null;var openSubscription=function(){userIsLoggedIn()?(document.getElementById("deepaiProSubscriptionRow").style.display="flex",document.getElementById("deepaiProSignupRow").style.display="none",document.getElementById("otherdeepaiProPaymentRow").style.display="flex",document.getElementById("otherdeepaiProSignupRow").style.display="none"):(document.getElementById("deepaiProSubscriptionRow").style.display="none",document.getElementById("otherdeepaiProPaymentRow").style.display="none",document.getElementById("otherdeepaiProSignupRow").style.display="flex",document.getElementById("deepaiProSignupRow").style.display="flex");subscription_modal.showModal();window.addEventListener("message",function(){console.log("received message:  ",event.data);"stripe subscription success"==event.data&&subscription_modal.close("cancelled")},!1)},closeSubscription=document.getElementById("close-sub");closeSubscription.addEventListener("click",function(){subscription_modal.close("cancelled")});subscription_modal.addEventListener("cancel",function(){subscription_modal.close("cancelled")});subscription_modal.addEventListener("click",function(a){a.target===subscription_modal&&subscription_modal.close("cancelled")});var openConfirmChatPricing=function(){var a=document.getElementById("confirm-chat-pricing-modal");a.showModal();a.addEventListener("click",function(b){b.target===document.getElementById("confirm-chat-pricing-modal")&&document.getElementById("confirm-chat-pricing-modal").close("cancelled")})};function confirmPricing(){var a,b,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress)return a=document.getElementById("confirm-chat-pricing-modal"),a.close("cancelled"),d.yield(fetch(app_base_url+"/confirm_chat_pricing",{credentials:"include",method:"POST"}),2);if(4!=d.nextAddress)return b=d.yieldResult,1!=b.ok?d.jumpTo(0):d.yield(b.json(),4);c=d.yieldResult;c.ok?chatSubmit():alert("Something went wrong, please try again later.");d.jumpToEnd()})}
function get_user_login_type(a){var b,c,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:return b=new FormData,b.append("email",a),e.yield(fetch(app_base_url+"/get_user_login_type",{credentials:"include",method:"POST",body:b}),2);case 2:c=e.yieldResult;if(1!=c.ok){e.jumpTo(3);break}return e.yield(c.json(),4);case 4:return d=e.yieldResult,e.return(d);case 3:return e.return(null)}})}
function login(a){var b,c,d,e,h,f,l,g,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:a.preventDefault();b=document.getElementById("login-user-email-error");b.innerHTML="";b.setAttribute("style","display: none;");c=document.getElementById("login-user-email");d=document.getElementById("login-user-password");e=c.value;h=d.value;f=new FormData;f.append("username",e);f.append("password",h);if(""==e||""==d){q.jumpTo(0);break}c.classList.add("loading");return q.yield(get_user_login_type(e),3);case 3:return l=q.yieldResult,l.user_exists?l.login_with_password?q.yield(fetch(app_base_url+"/rest-auth/login/",{credentials:"include",method:"POST",body:f}),4):(c.classList.remove("loading"),k=l.login_with_social_accounts[0],g="This account needs to be logged in using "+k,b=document.getElementById("login-user-email-error"),b.innerHTML=g,b.setAttribute("style","display: block;"),q.return()):(c.classList.remove("loading"),g="No user with this email or username was found",b=document.getElementById("login-user-email-error"),b.innerHTML=g,b.setAttribute("style","display: block;"),q.return());case 4:n=q.yieldResult;console.log(n);if(1!=n.ok){0==n.ok&&(c.classList.remove("loading"),500==n.status?(g="Hmm, something went wrong. Let's try that again.",b=document.getElementById("login-user-email-error"),b.innerHTML=g,b.setAttribute("style","display: block;")):400==n.status&&(g="Email/password combination incorrect. Let's try that again.",b=document.getElementById("login-user-email-error"),b.innerHTML=g,b.setAttribute("style","display: block;")));q.jumpTo(0);break}c.classList.remove("loading");login_modal.close("cancelled");return afterLoginFunction?q.yield(auth(),9):q.yield(auth(),0);case 9:afterLoginFunction(),q.jumpToEnd()}})}function loginSwitchToSignup(a){a.preventDefault();login_modal.close("cancelled");openSignup(afterLoginFunction)}function sleep_async(a){return new Promise(function(b){return setTimeout(b,a)})}
function social_auth(a,b){var c,d,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){switch(h.nextAddress){case 1:return c={linkedin:"/accounts/linkedin_oauth2/login/?process=login",twitter:"/accounts/twitter/login/?process=login",google:"/accounts/google/login/?process=login",github:"/accounts/github/login/?process=login"},d=app_base_url+c[a],e=window.open("about:blank","deepaiLogin","height=600,width=600,left=10,top=10,resizable=yes,scrollbars=yes,toolbar=no,menubar=no,location=no,directories=no,status=no"),h.yield(save_custom_signup_data(b),2);case 2:e.location.href=d;case 3:return h.yield(sleep_async(200),5);case 5:if(e.closed)return h.return();h.jumpTo(3)}})}
function social_signup(a,b){var c,d,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){switch(h.nextAddress){case 1:return a.preventDefault(),c=document.getElementById("user-email"),c.classList.add("loading"),d=document.getElementById("user-email-error"),d.innerHTML="",d.setAttribute("style","display: none;"),h.yield(social_auth(b,null),2);case 2:return h.yield(fetch(app_base_url+"/rest-auth/user/",{credentials:"include"}),3);case 3:e=h.yieldResult;if(1!=e.ok){c.classList.remove("loading");d.innerHTML="Hmm, something went wrong. You might already have an account with that email, or your passwords do not match.";d.setAttribute("style","display: block;");h.jumpTo(0);break}c.classList.remove("loading");modal.close("cancelled");return afterSignupFunction?h.yield(auth(),8):h.yield(auth(),0);case 8:afterSignupFunction(),h.jumpToEnd()}})}
function social_login(a,b){var c,d,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return a.preventDefault(),h.yield(social_auth(b,null),2);if(3!=h.nextAddress)return c=document.getElementById("login-user-email"),c.classList.add("loading"),h.yield(fetch(app_base_url+"/rest-auth/user/",{credentials:"include"}),3);d=h.yieldResult;if(1!=d.ok)return c.classList.remove("loading"),e=document.getElementById("login-user-email-error"),e.innerHTML="Hmm, something went wrong. Let's try that again.",e.setAttribute("style","display: block;"),h.jumpTo(0);c.classList.remove("loading");return h.yield(auth(),0)})}function logout(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return a.yield(fetch(app_base_url+"/rest-auth/logout/",{method:"POST",credentials:"include"}),2);localStorage.removeItem("user");localStorage.removeItem("hearts-cache");user_object={};window.location="/";a.jumpToEnd()})}
function resetPassword(a){var b,c,d,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return b=document.getElementById("login-user-email-error"),b.innerHTML="",b.setAttribute("style","display: none;"),login_user_email=document.getElementById("login-user-email"),login_user_email_value=login_user_email.value,c=new FormData,c.append("email",login_user_email_value),h.yield(fetch(app_base_url+"/password_reset_trigger",{method:"POST",credentials:"include",body:c}),2);d=h.yieldResult;console.log(d);1==d.ok?(e="Check your email inbox to reset password.",b=document.getElementById("login-user-email-error"),b.innerHTML=e,b.setAttribute("style","display: block; margin-top: 20px;")):0==d.ok&&(e="Hmm something isn't right. Please try again or contact us.",b=document.getElementById("login-user-email-error"),b.innerHTML=e,b.setAttribute("style","display: block; margin-top: 20px;"));h.jumpToEnd()})}
var thisPagePath=window.location.pathname,social_modal=document.getElementById("social-modal"),openSocial=function(a,b,c){social_modal.showModal();document.getElementById("share_title").innerHTML=b;document.getElementById("social-image").setAttribute("style","background-image: url('"+c+"')");document.getElementById("fb-link").href="https://www.facebook.com/sharer.php?u="+a;document.getElementById("tw-link").href="https://twitter.com/intent/tweet?url="+a;document.getElementById("lkdin-link").href="https://www.linkedin.com/shareArticle?mini=true&url="+a},closeSocial=document.getElementById("close-social");closeSocial.addEventListener("click",function(){social_modal.close("cancelled")});social_modal.addEventListener("cancel",function(){social_modal.close("cancelled")});social_modal.addEventListener("click",function(a){a.target===social_modal&&social_modal.close("cancelled")});var openArtModal=function(a){var b=document.getElementById("art-modal-"+a);b.showModal();b.addEventListener("cancel",function(){b.close("cancelled")});b.addEventListener("click",function(c){c.target===b&&b.close("cancelled")})};function fragmentFromString(a){return document.createRange().createContextualFragment(a)}
function timeSince(a,b){a=Math.floor((new Date-a)/1E3);var c=Math.floor(a/31536E3);if(1<c)return b.innerText=c+" years ago";c=Math.floor(a/2592E3);if(1<c)return b.innerText=c+" months ago";c=Math.floor(a/86400);if(1<c)return b.innerText=c+" days ago";c=Math.floor(a/3600);if(1<c)return b.innerText=c+" hours ago";c=Math.floor(a/60);if(1<c)return b.innerText=c+" minutes ago";b.innerText=Math.floor(a)+" seconds ago"}
function runTimeSince(){var a=document.getElementsByClassName("time-since"),b;a=$jscomp.makeIterator(a);for(b=a.next();!b.done;b=a.next()){var c=b.value;b=new Date(c.attributes.isodate.value);timeSince(b,c)}}runTimeSince();var mainListElement=document.getElementById("main-list"),currentSortMode;function doSearch(){var a,b,c,d,e,h,f,l,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){switch(k.nextAddress){case 1:a=searchInput.value;if(!onCategoryPage)return window.location.href="/?search="+encodeURIComponent(a),k.return();for(currentSortMode="searching";mainListElement.firstChild;)mainListElement.removeChild(mainListElement.firstChild);msnry&&(msnry.reloadItems(),msnry.layout());showHideScrollLoading(!0);b=app_base_url+"/site_search_row_listing/"+search_area+"?query="+encodeURIComponent(a);k.setCatchFinallyBlocks(2,3);return k.yield(fetch(b),5);case 5:c=k.yieldResult;if(!c.ok)throw c;return k.yield(c.text(),6);case 6:d=k.yieldResult;5>d.length&&console.log("search returned nothing");e=fragmentFromString(d);for(h=0;h<e.children.length;h++)f=e.children[h],mainListElement.querySelector('[objectid="'+f.attributes.objectid.value+'"][objectclass="'+f.attributes.objectclass.value+'"]')?console.log("skipping duplicate objectclass/objectid: ",f.attributes.objectclass.value,f.attributes.objectid.value):(l=mainListElement.appendChild(f),msnry&&msnry.appended(l));applyCachedHeartsToHeartsOnPage();runTimeSince();showHideScrollLoading(!1);case 3:k.enterFinallyBlock();showHideScrollLoading(!1);k.leaveFinallyBlock(0);break;case 2:g=k.enterCatchBlock(),console.log("caught search error...",g),k.jumpTo(3)}})}var chat_style="chat",currentProgressTime=0,currentProgressTimer=null,currentlyRunningModel=!1,model_expected_runtime=5;function cancelProgressBar(){progressBar=document.getElementById("progressBar");progressBar.style.width="0%";currentProgressTime=0;currentProgressTimer&&(window.clearInterval(currentProgressTimer),currentProgressTimer=null)}
function progressBarFunctionWrapper(a){var b,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){switch(d.nextAddress){case 1:return(b=model_expected_runtime)||(b=10),console.log("start progress bar"),currentlyRunningModel=!0,progressBar=document.getElementById("progressBar"),cancelProgressBar(),d.setCatchFinallyBlocks(2,3),currentProgressTimer=window.setInterval(function(){currentProgressTime++;progressBar.style.width=100*Math.tanh(currentProgressTime/60/b)+"%"},Math.round(1E3/60)),d.yield(a(),5);case 5:return d.return(d.yieldResult);case 3:d.enterFinallyBlock();console.log("end progress bar");currentlyRunningModel=!1;cancelProgressBar();d.leaveFinallyBlock(0);break;case 2:c=d.enterCatchBlock(),console.log(c),d.jumpTo(3)}})}function geniusToggled(){var a=document.getElementById("genius");a.hasAttribute("locked")&&(openSubscription(),a.checked=!1)}function concatUint8Array(a,b){var c=new Uint8Array(a.length+b.length);c.set(a);c.set(b,a.length);return c}
function Utf8ArrayToStr(a){for(var b="",c=a.length,d=0;d<c;){var e=a[d++];if(0===e>>7)b+=String.fromCharCode(e);else if(6===e>>5){var h=a[d++];b+=String.fromCharCode((e&31)<<6|h&63)}else if(14===e>>4){h=a[d++];var f=a[d++];b+=String.fromCharCode((e&15)<<12|(h&63)<<6|f&63)}else if(30===e>>3){h=a[d++];f=a[d++];var l=a[d++];e=((e&7)<<18|(h&63)<<12|(f&63)<<6|l&63)-65536;b+=String.fromCharCode((e>>10)+55296,(e&1023)+56320)}}return b}
function copyChatPointer(a){a=document.getElementById(a);console.log(a.id);return a.id}function getFullChatHistoryObject(){for(var a=Array.from(document.getElementsByClassName("chatbox")),b=Array.from(document.getElementsByClassName("outputBox")),c=[],d=0;d<a.length;d++){var e=a[d],h=b[d];e&&c.push({role:"user",content:e.value});h&&(e=getTextFromDiv(h),c.push({role:"assistant",content:e}))}return c}function getChatHistoryObject(){var a=getFullChatHistoryObject();a.splice(0,a.length-30);return a}
function textAreaKeyPressHandler(a){13!=a.keyCode||a.shiftKey||(a.preventDefault(),chatSubmit())}function editedtextAreaKeyPressHandler(a){13!=a.keyCode||a.shiftKey||(a.preventDefault(),chatReSubmit())}var chatStopper=!1;function chatStop(){return chatStopper=!0}var copyButtonId="copyButtonId_1",chatboxWrapperId="chatboxWrapperId_1";function chatSubmit(){var a,b,c,d,e,h,f,l,g,k,n,q,v,A,J,N,P,O,G,K,M,x,R,Q,Y,Z,aa,m,p,r,t,z,B,y,D,da,U,V,ha,X,ba,W,ka,H,ia,ca,ea;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:try{saveChatHistory()}catch(u){console.log("Error saving chat history before chatSubmit",u)}Array.from(document.getElementsByClassName("chatbox")).slice(-1);a=getChatHistoryObject();b=new FormData;b.append("chat_style",chat_style);b.append("chatHistory",JSON.stringify(a));c=document.getElementById("genius");(d=c.checked)&&b.append("model","genius");e=Math.round(1E11*Math.random())+"";h=function(){for(var u=[],w=0;64>w;)u[w]=0|4294967296*Math.sin(++w%Math.PI);return function(I){var L,S,T,ja=[L=1732584193,S=4023233417,~L,~S],fa=[],F=unescape(encodeURI(I))+"\u0080",C=F.length;I=--C/4+2|15;for(fa[--I]=8*C;~C;)fa[C>>2]|=F.charCodeAt(C)<<8*C--;for(w=F=0;w<I;w+=16){for(C=ja;64>F;C=[T=C[3],L+((T=C[0]+[L&S|~L&T,T&L|~T&S,L^S^T,S^(L|~T)][C=F>>4]+u[F]+~~fa[w|[F,5*F+1,3*F+5,7*F][C]&15])<<(C=[7,12,17,22,5,9,14,20,4,11,16,23,6,10,15,21][4*C+F++%4])|T>>>-C),L,S])L=C[1]|0,S=C[2];for(F=4;F;)ja[--F]+=C[F]}for(I="";32>F;)I+=(ja[F>>3]>>4*(1^F++)&15).toString(16);return I.split("").reverse().join("")}}();f="tryit-"+e+"-"+h(navigator.userAgent+h(navigator.userAgent+h(navigator.userAgent+e+"x")));l=document.getElementById("chatSubmitButton");g=document.getElementById("chatStopButton");null!==document.getElementById("chatEditSubmitButton")&&(document.getElementById("chatEditSubmitButton").disabled=!0,document.getElementById("chatEditSubmitButton").style="background: #b5b5b5; color: #101010;");null!==document.getElementById("chatRegenButton")&&(document.getElementById("chatRegenButton").disabled=!0);k=$jscomp;n=k.makeIterator;return E.yield(progressBarFunctionWrapper(function(){var u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(1==I.nextAddress)return g.style="display: block;",l.style="display: none;",I.yield(fetch(app_base_url+"/chat_response",{credentials:"include",method:"POST",body:b,headers:{"api-key":f}}),2);u=I.yieldResult;w=u.body.getReader();return I.return([w,u])})}),2);case 2:q=n.call(k,E.yieldResult);v=q.next().value;A=q.next().value;if(!(299<A.status)){E.jumpTo(3);break}return E.yield(v.read(),4);case 4:J=E.yieldResult;N=J.value;P=new TextDecoder("utf-8");O=JSON.parse(P.decode(N));if("anonymous try it exceeded"===O.status)return openSignup(function(){},"Sign Up to Keep Chatting!"),g.style="display: none;",l.style="display: block;",E.return();if("signed in try-it quota exceeded"===O.status||"model only available to paid users"===O.status)return openSubscription(),g.style="display: none;",l.style="display: block;",E.return();if("please confirm chat pricing by using AI Chat on the deepai website"===O.status)return openConfirmChatPricing(),g.style="display: none;",l.style="display: block;",E.return();g.style="display: none;";l.style="display: block;";throw Error("Unknown error");case 3:G=document.createElement("div"),G.className="optionsBox",G.contentEditable="false",K=document.createElement("div"),K.className="outputBox",M=document.querySelectorAll(".chatbox-wrapper, .editsBox"),x=M[M.length-1],x.parentNode.insertBefore(K,x.nextSibling),K.innerText="",R=new Uint8Array(0),Q="";case 5:return E.yield(v.read(),7);case 7:Y=E.yieldResult;Z=Y.value;if(aa=Y.done){E.jumpTo(6);break}if(chatStopper){E.jumpTo(6);break}R=concatUint8Array(R,Z);Q=m=Utf8ArrayToStr(R);Q.includes("OpenAI")&&(Q=Q.replaceAll("OpenAI","DeepAI"));p=Q.substring(K.innerText.length,Q.length);r=p.split(/(\s+)/);t=0;case 8:if(!(t<r.length)){E.jumpTo(5);break}z=r[t];B=document.createTextNode(z);K.appendChild(B);return E.yield(new Promise(function(u){return setTimeout(u,10)}),9);case 9:t++;E.jumpTo(8);break;case 6:console.log("Response fully received");document.getElementById("chatRegenButton").disabled=!1;null!==document.getElementById("chatEditSubmitButton")&&(document.getElementById("chatEditSubmitButton").disabled=!1,document.getElementById("chatEditSubmitButton").style="background: #26A69A; color: white;");l.style="display: block;";g.style="display: none;";try{saveChatHistory()}catch(u){console.log("Error saving chat history after response is received",u)}y={Copy:"",Delete:"",Summarize:""};D=document.createElement("button");D.className="copytextButton";D.innerText="Copy";D.type="button";D.id=copyButtonId;D.onclick=function(u){u=u.target.closest(".outputBox").innerText;u=replaceAll(u,y);u=u.replace(/[\r\n]+$/,"");navigator.clipboard.writeText(u);var w=document.getElementById("copypopup");w.className="show";setTimeout(function(){w.className=w.className.replace("show","")},3E3)};copyButtonId=updateElementId(copyButtonId);da=document.querySelectorAll(".summarizetextButton");da.forEach(function(u){u.style="display: none;"});U=document.createElement("button");U.className="summarizetextButton";U.innerText="Summarize";U.type="button";U.id="sumButtonId";U.onclick=function(u){u=u.target.closest(".outputBox").innerText;u=replaceAll(u,y);u=u.replace(/[\r\n]+$/,"");summarizeSubmit("Summarize the following text: "+u);var w=document.getElementById("summarypopup");w.className="show";setTimeout(function(){w.className=w.className.replace("show","")},3E3)};V=document.createElement("button");V.className="deleteBoxButton";V.type="button";V.innerText="Delete";ha=function(u){u=this.parentNode.parentNode;var w=u.nextSibling;null!=w&&"editsBox"==w.className&&w.remove();u.remove();"outputBox"==u.className&&1<=document.querySelectorAll(".outputBox").length&&(Array.from(document.getElementsByClassName("outputBox")).slice(-1)[0].querySelector(".summarizetextButton").style="display: flex;");2>document.querySelectorAll(".chatbox").length&&(document.getElementById("chatRegenButton").style="display: none");Array.from(document.getElementsByClassName("chatbox")).slice(-1)[0].focus()};V.onclick=ha;G.appendChild(D);G.appendChild(U);G.appendChild(V);K.appendChild(G);G=document.createElement("div");G.className="chatoptionsBox";G.contentEditable="false";X=document.createElement("div");X.className="chatbox-wrapper";X.id=chatboxWrapperId;ba={};W=document.createElement("textarea");W.className="chatbox";W.position="relative";W.rows=10;W.cols=50;X.onkeypress=textAreaKeyPressHandler;X.appendChild(W);M=document.querySelectorAll(".chatbox-wrapper, .outputBox, .editsBox");x=M[M.length-1];x.parentNode.insertBefore(X,x.nextSibling);ka=document.querySelectorAll(".chatbox-wrapper");H=Array.from(ka).slice(-2)[0];H.onkeypress=editedtextAreaKeyPressHandler;ia=V.cloneNode(!0);ia.onclick=ha;G.appendChild(ia);1===H.children.length&&H.appendChild(G);W.focus();ea=ca=!1;getNextSiblings(H,ea);H.addEventListener("click",function(){ba[H.id]=H.children[0].value});H.addEventListener("input",function(){ea=!0;if(!1===ca){var u=document.createElement("div");u.className="editsBox";var w=document.createElement("button");w.id="chatEditSubmitButton";w.innerText="Save & Go";w.onclick=function(){var L=getNextSiblings(H,ea);u.remove();delete ba[H.id];editSubmitCallback(L);ca=!1};var I=document.createElement("button");I.id="chatEditCancelButton";I.innerText="Cancel";I.onclick=function(){u.remove();var L=ba[H.id];delete ba[H.id];H.children[0].value=L;ca=!1};"outputBox"==H.nextSibling.className&&(u.appendChild(w),u.appendChild(I),H.parentNode.insertBefore(u,H.nextSibling));ca=!0}});chatboxWrapperId=updateElementId(chatboxWrapperId);document.getElementById("chatRegenButton").style="display: flex";try{freestar.refresh()}catch(u){console.log("error refreshing freestar",u)}chatStopper=!1;E.jumpToEnd()}})}
try{var chatbox_text=sessionStorage.getItem("homepage_chatbox_text");if(chatbox_text){sessionStorage.removeItem("homepage_chatbox_text");var chatbox=Array.from(document.getElementsByClassName("chatbox-wrapper")).slice(-1)[0];chatbox.children[0].value=chatbox_text;chatbox.scrollIntoView();chatSubmit()}}catch(a){console.log("error getting chatbox_text from sessionStorage",a)}
function summarizeSubmit(a){try{var b=Array.from(document.getElementsByClassName("chatbox-wrapper")).slice(-1)[0];b.children[0].value=a;b.scrollIntoView();chatSubmit()}catch(c){console.log("error getting text for summarization",c)}}function getNextSiblings(a,b){for(var c=[];a=a.nextSibling;)3!==a.nodeType&&(b&&("outputBox"==a.className||"chatbox-wrapper"==a.className||"editsBox"==a.className)&&c.push(a),"outputBox"!=a.className&&"chatbox-wrapper"!=a.className||c.push(a));return c}
function editSubmitCallback(a){a.forEach(function(b){b.remove()});chatSubmit()}function chatReSubmit(){var a=Array.from(document.querySelectorAll(".chatbox-wrapper")).slice(-2)[0];getNextSiblings(a,!1).forEach(function(b){b.remove()});chatSubmit()}function replaceAll(a,b){return Object.keys(b).reduce(function(c,d,e){return(""+c).replace(new RegExp(d,"ig"),b[d])},a)}function updateElementId(a){var b=a.slice(0,a.indexOf("_"));a=parseInt(a.slice(a.indexOf("_")+1));return b+"_"+(a+1).toString()}
function getTextFromDiv(a){for(var b="",c=0;c<a.childNodes.length;c++){var d=a.childNodes[c];d.nodeType===Node.TEXT_NODE&&(b+=d.textContent)}return b}function showInfoOptions(a){a="chatInfoIdeaButton"===a?document.getElementById("idea-info-list"):"chatInfoStrengthButton"===a?document.getElementById("str-info-list"):document.getElementById("weak-info-list");"none"===a.style.display?(a.style.display="flex",a.style.margin="0px 10px 0px 20px"):a.style.display="none"}
function uuidv4(){for(var a=[],b=0;36>b;b++)a[b]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);a[14]="4";a[19]="0123456789abcdef".substr(a[19]&3|8,1);a[8]=a[13]=a[18]=a[23]="-";return a.join("")}var currentChatUUID=uuidv4();function saveChatHistory(){var a,b,c,d,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return a=getFullChatHistoryObject(),b=currentChatUUID,c=new FormData,c.append("uuid",b),c.append("title",""),c.append("chat_style",chat_style),c.append("messages",JSON.stringify(a)),h.yield(fetch(app_base_url+"/save_chat_session",{credentials:"include",method:"POST",body:c}),2);if(3!=h.nextAddress)return d=h.yieldResult,h.yield(d.json(),3);e=h.yieldResult;console.log("saveChatHistory response",e);try{saveSessionUUIDToLocalStorage(currentChatUUID)}catch(f){console.log("error saving session uuid to localStorage",f)}h.jumpToEnd()})}function getChatHistory(a){var b,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress)return d.yield(fetch(app_base_url+"/get_chat_session?uuid="+a,{credentials:"include",method:"GET"}),2);if(3!=d.nextAddress)return b=d.yieldResult,d.yield(b.json(),3);c=d.yieldResult;console.log("getChatHistory response",c);return d.return(c)})}
function deleteChatHistoryEntry(){var a,b,c,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return a=currentChatUUID,b=new FormData,b.append("uuid",a),confirm("Please confirm, if you want to delete this chat. \n Choose OK or Cancel."),e.yield(fetch(app_base_url+"/delete_chat_session",{credentials:"include",method:"POST",body:b}),2);if(3!=e.nextAddress)return c=e.yieldResult,e.yield(c.json(),3);d=e.yieldResult;console.log("deleteChatHistoryEntry response",d);window.location.reload();e.jumpToEnd()})}
function renameChatHistoryEntry(){var a,b,c,d,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return a=currentChatUUID,b=document.getElementById("new-chat-title").value,c=new FormData,c.append("uuid",a),c.append("title",b),h.yield(fetch(app_base_url+"/rename_chat_session",{credentials:"include",method:"POST",body:c}),2);if(3!=h.nextAddress)return d=h.yieldResult,h.yield(d.json(),3);e=h.yieldResult;console.log("renameChatHistoryEntry response",e);window.location.reload();h.jumpToEnd()})}function clearChat(){chatboxWrapperId="chatboxWrapperId_1";copyButtonId="copyButtonId_1";Array.from(document.querySelectorAll(".chatbox-wrapper")).forEach(function(a){a.remove()});Array.from(document.querySelectorAll(".outputBox")).forEach(function(a){a.remove()})}function showChatHistoryEditing(){document.getElementById("history-rename").scrollIntoView()}
function displayChatHistory(a){clearChat();for(var b=function(g,k,n){var q=document.createElement("button");q.className=g;q.type="button";q.innerText=k;q.onclick=n;return q},c=function(g){g=g.target.closest(".outputBox")||g.target.closest(".chatbox-wrapper");var k=g.nextSibling;"editsBox"==(null==k?void 0:k.className)&&k.remove();g.remove();if(g=Array.from(document.getElementsByClassName("outputBox")).slice(-1)[0])g.querySelector(".summarizetextButton").style="display: flex;";2>document.querySelectorAll(".chatbox").length&&(document.getElementById("chatRegenButton").style="display: none");Array.from(document.getElementsByClassName("chatbox")).slice(-1)[0].focus()},d=document.getElementById("progressContainer"),e=$jscomp.makeIterator(a.messages),h=e.next();!h.done;h=e.next()){h=h.value;var f=void 0;if("user"===h.role){f=document.createElement("div");f.className="chatbox-wrapper";var l=document.createElement("textarea");l.className="chatbox";l.position="relative";l.rows=10;l.cols=50;l.value=h.content;f.appendChild(l);l=document.createElement("div");l.className="chatoptionsBox";l.contentEditable="false";l.appendChild(b("deleteBoxButton","Delete",c));h!==a.messages[a.messages.length-1]&&f.appendChild(l);f.onkeypress=textAreaKeyPressHandler}else if("assistant"===h.role)f=document.createElement("div"),f.className="outputBox",f.textContent=h.content,h=document.createElement("div"),h.className="optionsBox",h.contentEditable="false",h.appendChild(b("copytextButton","Copy",function(g){g=g.target.closest(".outputBox").innerText;g=replaceAll(g,{Copy:"",Delete:"",Summarize:""}).replace(/[\r\n]+$/,"");navigator.clipboard.writeText(g);var k=document.getElementById("copypopup");k.className="show";setTimeout(function(){return k.className=k.className.replace("show","")},3E3)})),h.appendChild(b("deleteBoxButton","Delete",c)),f.appendChild(h);else{console.log("unknown message role",h.role);continue}d.insertAdjacentElement("afterEnd",f);d=f}}
function saveSessionUUIDToLocalStorage(a){var b=localStorage.getItem("chatSessionUUIDs");if(null===b)b=[];else try{b=JSON.parse(b)}catch(c){console.log("error parsing existingUUIDs",c),b=[]}b.push(a);b=[].concat($jscomp.arrayFromIterable(new Set(b)));localStorage.setItem("chatSessionUUIDs",JSON.stringify(b))}
function getChatSessionUUIDsFromLocalStorage(){var a=localStorage.getItem("chatSessionUUIDs");if(null===a)a=[];else try{a=JSON.parse(a)}catch(b){console.log("error parsing existingUUIDs",b),a=[]}return a}
function getMyChatSessionsAndConvertAnonymousSessions(){var a,b,c,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return a=getChatSessionUUIDsFromLocalStorage(),b=new FormData,b.append("my_known_uuids",JSON.stringify(a)),e.yield(fetch(app_base_url+"/get_my_chat_sessions_and_convert_anonymous_sessions",{credentials:"include",method:"POST",body:b}),2);if(3!=e.nextAddress)return c=e.yieldResult,e.yield(c.json(),3);d=e.yieldResult;console.log("getMyChatSessionsAndConvertAnonymousSessions response",d);return e.return(d)})}
function displayMyChatSessions(){var a,b,c,d,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return h.yield(getMyChatSessionsAndConvertAnonymousSessions(),2);a=h.yieldResult.sessions;b=document.getElementById("chat-dropdown-box-id");c=document.getElementById("chatSessionEditing");for(d=document.getElementById("history-editing");b.firstChild;)b.removeChild(b.firstChild);e=document.createElement("option");e.innerText="Chat History";e.session_uuid=null;b.appendChild(e);0==a.length?(b.style="display: none;",c.style="display: none;",d.style="display: none;"):(b.style="display: block;",c.style="display: block;",d.style="display: flex;",a.forEach(function(f){console.log(f);var l=document.createElement("option");l.innerText=f.title;l.session_uuid=f.uuid;b.appendChild(l)}),b.onchange=function(){document.activeElement.blur();progressBarFunctionWrapper(function(){var f,l,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress){f=b.options[b.selectedIndex];if(null===f.session_uuid)return k.return();clearChat();l=f.session_uuid;return k.yield(getChatHistory(l),2)}g=k.yieldResult;currentChatUUID=l;displayChatHistory(g);k.jumpToEnd()})})});h.jumpToEnd()})}try{displayMyChatSessions()}catch(a){console.log("error displaying my chat sessions",a)};;</script>

            
	</body>
</html>
